// MVP placeholder QR renderer (NOT a real QR). For real QR use a proper library.
// It draws a stylized code-like pattern + embeds the payload text.
(function(){
  window.renderPseudoQR = function(canvas, text){
    const ctx = canvas.getContext('2d');
    const w = canvas.width, h = canvas.height;
    ctx.fillStyle = '#fff'; ctx.fillRect(0,0,w,h);
    ctx.fillStyle = '#111827';
    const cell = 10;
    for(let y=0;y<h;y+=cell){
      for(let x=0;x<w;x+=cell){
        const v = (x*y + text.length*97 + x*13 + y*7) % 17;
        if(v < 4) ctx.fillRect(x,y,cell-1,cell-1);
      }
    }
    // white center
    ctx.fillStyle = '#fff';
    ctx.fillRect(w*0.15,h*0.40,w*0.70,h*0.20);
    ctx.fillStyle = '#111827';
    ctx.font = 'bold 14px system-ui, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(text, w/2, h/2+5);
  }
})();
